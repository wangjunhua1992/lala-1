webpackJsonp([98],{UyNZ:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("Cz8s"),o=i("/Vxk"),a={data:function(){return{goods_id:Number,goods:{},islegal:!1,username:"",mobile:"",bind_mobile:{},showPreLoading:!0}},components:{PublicHeader:e.a,BindMobile:o.a},methods:{onLoad:function(){var t=this;this.util.request({url:"creditshop/order/create",data:{goods_id:this.goods_id}}).then(function(s){t.showPreLoading=!1;var i=s.data.message;if(i.errno)return t.util.$toast(i.message),!1;t.goods=i.message,t.islegal=!0,window.bind_mobile&&(t.bind_mobile=window.bind_mobile)})},onSubmit:function(){var t=this;if("goods"==this.goods.type){if(!this.username)return this.util.$toast("请输入姓名"),!1;if(!this.mobile)return this.util.$toast("请输入联系方式"),!1}if(!this.islegal)return!1;this.islegal=!1,this.util.request({url:"creditshop/order/submit",data:{goods_id:this.goods_id,username:this.username,mobile:this.mobile}}).then(function(s){var i=s.data.message;if(i.errno)return t.util.$toast(i.message),!1;var e=i.message.order_id,o={path:"/pages/creditshop/detail",query:{id:e}};"pay"==i.message.redirect?(o="/pages/public/pay?order_id="+e+"&order_type=creditshop",t.util.jsUrl(o)):t.util.$toast("兑换成功",t.util.getUrl(o))})}},created:function(){if(!this.$route.query.goods_id)return this.util.$toast("参数错误"),!1;this.goods_id=this.$route.query.goods_id},mounted:function(){this.onLoad()}},n={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"creditshop-create"}},[i("public-header",{attrs:{title:"订单确认"}}),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"goods-info"},[t._m(0),t._v(" "),i("div",{staticClass:"padding-15-tb goods flex-lr van-hairline--bottom"},[i("div",{staticClass:"thumb"},[i("img",{staticClass:"img-100",attrs:{src:t.goods.thumb,alt:""}})]),t._v(" "),i("div",{staticClass:"info"},[i("p",[t._v(t._s(t.goods.title))]),t._v(" "),i("div",{staticClass:"flex"},[i("div",{staticClass:"c-danger"},[t._v(t._s(t.goods.use_credit1)+"积分 ")]),t._v(" "),t.goods.use_credit2>0?i("div",{staticClass:"c-danger"},[t._v(" + "+t._s(t.Lang.dollarSign)+t._s(t.goods.use_credit2))]):t._e(),t._v(" "),i("div",{staticClass:"c-gray font-12 line-through margin-5-l"},[t._v(t._s(t.Lang.dollarSign)+t._s(t.goods.old_price))])])])]),t._v(" "),i("div",{staticClass:"padding-15-t total-price"},[i("div",{staticClass:"margin-15-l"},[i("span",[t._v("小计")]),i("span",{staticClass:"c-danger font-16 font-500"},[t._v("\n\t\t\t\t\t\t"+t._s(t.goods.use_credit1)+"积分\n\t\t\t\t\t\t"),t.goods.use_credit2>0?[t._v("\n\t\t\t\t\t\t\t+ "+t._s(t.goods.use_credit2)+t._s(t.Lang.dollarSignCn)+"\n\t\t\t\t\t\t")]:t._e()],2)])])]),t._v(" "),"goods"==t.goods.type?i("div",{staticClass:"margin-10"},[i("van-field",{attrs:{label:"姓名",type:"text",placeholder:"请输入您的名字","input-align":"right"},model:{value:t.username,callback:function(s){t.username="string"==typeof s?s.trim():s},expression:"username"}}),t._v(" "),i("van-field",{attrs:{label:"联系方式",type:"text",placeholder:"请输入您的联系方式","input-align":"right"},model:{value:t.mobile,callback:function(s){t.mobile=t._n(s)},expression:"mobile"}})],1):t._e()]),t._v(" "),i("van-submit-bar",{attrs:{currency:t.Lang.dollarSign,disabled:!t.islegal,"button-text":"提交订单"},on:{submit:t.onSubmit}},[i("div",{staticClass:"order-total-field",attrs:{slot:"default"},slot:"default"},[t._v("\n\t\t\t待支付\n\t\t\t"),i("div",{staticClass:"order-total"},[t._v("\n\t\t\t\t"+t._s(t.goods.use_credit1)+"积分\n\t\t\t\t"),t.goods.use_credit2>0?[t._v("\n\t\t\t\t\t+ "+t._s(t.Lang.dollarSign)+t._s(t.goods.use_credit2)+"\n\t\t\t\t")]:t._e()],2)])]),t._v(" "),i("bind-mobile",{attrs:{"bind-mobile":t.bind_mobile}}),t._v(" "),t.showPreLoading?i("iloading"):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"flex"},[s("span",{staticClass:"font-14 font-500"},[this._v("商品信息")])])}]};var d=i("VU/8")(a,n,!1,function(t){i("kmYV")},null,null);s.default=d.exports},kmYV:function(t,s){}});
//# sourceMappingURL=98.87d8e86e35bdb581e27f.js.map