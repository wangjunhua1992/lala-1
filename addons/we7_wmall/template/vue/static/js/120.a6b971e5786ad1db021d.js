webpackJsonp([120],{"3txO":function(t,s){},zCNV:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("Gu7T"),o=i.n(a),n=i("Dd8w"),e=i.n(n),l=i("Cz8s"),c=i("NPH5"),r=i("NYxO"),d=i("deIj"),_={data:function(){return{cards_mine:[],records:{page:1,psize:15,loading:!1,finished:!1,empty:!1,data:[]},showAllMine:!0,getLocationFail:!1,showPreLoading:!0}},components:{PublicHeader:l.a,load:c.a},methods:e()({onLoad:function(){var t=this;Object(d.b)({vue:t,url:"kabao/index/index",recordsName:"cards_store",data:{page:t.records.page,psize:t.records.psize,lat:t.locationInfo.location_x,lng:t.locationInfo.location_y},success:function(s){t.cards_mine=[].concat(o()(s.cards_mine)),t.cards_mine.length>4&&(t.showAllMine=!1)}})},onToggleShowAll:function(){this.showAllMine=!this.showAllMine},onInit:function(){var t=this;t.getLocation(),t.locationInfo.location_x?(t.getLocationFail=!1,t.locationInfo.last_location_x=this.locationInfo.location_x,t.onLoad()):t.util.getLocation({successLocation:function(s){t.setLocation({location_x:s.location_x,location_y:s.location_y}),t.onLoad()},successAddress:function(s){t.setLocation({location_x:s.location_x,location_y:s.location_y,address:s.address})},fail:function(s){t.setLocation({last_location_x:0,location_x:0,address:"获取定位失败"}),t.getLocationFail=!0,t.onLoad()}})}},Object(r.b)(["setLocation","getLocation"])),mounted:function(){this.onInit()},computed:e()({},Object(r.c)(["locationInfo"]))},v={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"vip-card-bag"}},[i("public-header",{attrs:{title:"会员卡包"}}),t._v(" "),i("div",{staticClass:"content bg-default font-14"},[t.cards_mine.length>0?[i("div",{staticClass:"headline"},[t._v("我的会员卡")]),t._v(" "),i("ul",{staticClass:"mycard padding-15-lr"},[t._l(t.cards_mine,function(s,a){return[t.showAllMine?[i("li",{staticClass:"mycard-item",style:{background:"url("+s.thumb+") no-repeat top center",backgroundSize:"100% auto"}},[i("div",{staticClass:"store-logo"},[i("img",{staticClass:"img-100",attrs:{src:s.store_logo,alt:""}})]),t._v(" "),i("div",{staticClass:"store-info"},[i("div",{staticClass:"store-title ellipsis"},[t._v(t._s(s.store_title))]),t._v(" "),i("div",{staticClass:"font-12"},[t._v(t._s(s.group_title))])]),t._v(" "),i("router-link",{staticClass:"vip-detail",attrs:{tag:"div",to:t.util.getUrl({path:"/plugin/pages/kabao/detail",query:{sid:s.sid}})}},[t._v("会员详情")])],1)]:[a<4?i("li",{staticClass:"mycard-item",style:{background:"url("+s.thumb+") no-repeat top center",backgroundSize:"100% auto"}},[i("div",{staticClass:"store-logo"},[i("img",{staticClass:"img-100",attrs:{src:s.store_logo,alt:""}})]),t._v(" "),i("div",{staticClass:"store-info"},[i("div",{staticClass:"store-title ellipsis"},[t._v(t._s(s.store_title))]),t._v(" "),i("div",{staticClass:"font-12"},[t._v(t._s(s.group_title))])]),t._v(" "),i("router-link",{staticClass:"vip-detail",attrs:{tag:"div",to:t.util.getUrl({path:"/plugin/pages/kabao/detail",query:{sid:s.sid}})}},[t._v("会员详情")])],1):t._e()]]})],2),t._v(" "),t.cards_mine.length>4?i("div",{staticClass:"flex-center margin-15-t c-gray",on:{click:t.onToggleShowAll}},[t.showAllMine?[i("span",{staticClass:"margin-5-r"},[t._v("收起")]),t._v(" "),i("i",{staticClass:"icon icon-fold "})]:[i("span",{staticClass:"margin-5-r"},[t._v("展开")]),t._v(" "),i("i",{staticClass:"icon icon-unfold"})]],2):t._e()]:t._e(),t._v(" "),i("div",{staticClass:"headline"},[t._v("附近商家")]),t._v(" "),t.records.empty?t._e():i("van-list",{staticClass:"nearby-stores padding-15-lr",attrs:{finished:t.records.finished,offset:100,"immediate-check":!1},on:{load:t.onLoad},model:{value:t.records.loading,callback:function(s){t.$set(t.records,"loading",s)},expression:"records.loading"}},[t._l(t.records.data,function(s,a){return i("li",{key:a,staticClass:"nearby-store-item"},[i("div",{staticClass:"store padding-15-tb"},[i("div",{staticClass:"store-logo"},[i("img",{staticClass:"img-100",attrs:{src:s.logo,alt:""}})]),t._v(" "),i("div",{staticClass:"store-info"},[i("div",{staticClass:"store-title w-100 ellipsis font-bold"},[t._v(t._s(s.title))]),t._v(" "),i("ul",{staticClass:"power"},t._l(s.powers,function(s,a){return i("li",{staticClass:"power-item"},[t._v(t._s(s))])}),0)]),t._v(" "),i("router-link",{staticClass:"join flex",attrs:{tag:"div",to:t.util.getUrl({path:"/plugin/pages/kabao/detail",query:{sid:s.sid}})}},[i("i",{staticClass:"icon icon-plus font-12"}),t._v(" "),i("span",[t._v("免费加入")])])],1),t._v(" "),i("div",{staticClass:"van-hairline--top padding-15-tb",on:{click:function(i){return t.util.jsLocation({lat:s.location_x,lng:s.location_y})}}},[i("van-row",[i("van-col",{attrs:{span:"18"}},[i("div",{staticClass:"flex w-100"},[i("i",{staticClass:"icon icon-location margin-5-r"}),t._v(" "),i("span",{staticClass:"store-address ellipsis"},[t._v(t._s(s.address))])])]),t._v(" "),i("van-col",{attrs:{span:"5"}},[i("div",{staticClass:"padding-10-l van-hairline--left"},[t._v(t._s(s.distance>100?">100":s.distance)+"km")])]),t._v(" "),i("van-col",{attrs:{span:"1"}},[i("i",{staticClass:"icon icon-right text-right font-12 c-gray"})])],1)],1)])}),t._v(" "),t.records.finished?i("load",{attrs:{type:"loaded",text:"更多商家会员，敬请期待"}}):t._e()],2)],2),t._v(" "),t.showPreLoading?i("iloading"):t._e()],1)},staticRenderFns:[]};var u=i("VU/8")(_,v,!1,function(t){i("3txO")},null,null);s.default=u.exports}});
//# sourceMappingURL=120.a6b971e5786ad1db021d.js.map