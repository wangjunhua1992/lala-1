{"version":3,"sources":["webpack:///src/pages/member/gMap.vue","webpack:///./src/pages/member/gMap.vue?0a41","webpack:///./src/pages/member/gMap.vue"],"names":["gMap","data","key","components","PublicHeader","header","watch","that","this","Object","funcCommon","vue","url","success","res","console","log","fail","util","$toast","message","methods","onLoad","loadmap","onGetAddressPois","uluru","lat","lng","map","google","maps","Map","document","getElementById","center","zoom","Marker","position","label","icon","setMap","infoWindow","InfoWindow","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","setPosition","setContent","open","setCenter","handleLocationError","getCenter","browserHasGeolocation","radius","created","mounted","member_gMap","render","_vm","_h","$createElement","_c","_self","attrs","id","title","_v","staticClass","placeholder","model","value","callback","$$v","expression","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"sKAcAA,GACAC,KADA,WAEA,OACAC,IAAA,KAGAC,YACAC,aAAAC,EAAA,GAEAC,OACAJ,IADA,WAEA,IAAAK,EAAAC,KACAN,EAAAK,EAAAL,IACAA,GACIO,OAAAC,EAAA,EAAAD,EACJE,IAAAJ,EACAK,IAAA,sCACAX,MACAC,OAEAW,QAAA,SAAAC,GACAC,QAAAC,IAAA,SAAAF,IAEAG,KAAA,SAAAH,GACAP,EAAAW,KAAAC,OAAAL,EAAAM,cAMAC,SAEAC,OAFA,WAGAd,KACAe,UADAf,KAEAgB,kBAAA,iBAKAD,QAVA,WAWA,IAAAhB,EAAAC,KACAiB,GAAAC,KAAA,OAAAC,IAAA,SACAC,EAAA,IAAAC,OAAAC,KAAAC,IAAAC,SAAAC,eAAA,QACAC,OAAAT,EACAU,KAAA,IAIA,IAAAN,OAAAC,KAAAM,QACAC,SAAAZ,EACAa,MAAA,IACAV,QAGA,IAAAC,OAAAC,KAAAM,QACAC,UAAAX,KAAA,OAAAC,IAAA,SACAY,KAAA,iFACAD,MAAA,MAEAE,OAAAZ,GAEA,IAAAC,OAAAC,KAAAM,QACAC,UAAAX,KAAA,OAAAC,IAAA,SACAY,KAAA,iFACAD,MAAA,IACAV,QAJA,IAUAa,EAAA,IAAAZ,OAAAC,KAAAY,WACAC,UAAAC,YACAD,UAAAC,YAAAC,mBAAA,SAAAR,GACA,IAAAS,GACApB,IAAAW,EAAAU,OAAAC,SACArB,IAAAU,EAAAU,OAAAE,WAGAR,EAAAS,YAAAJ,GACAL,EAAAU,WAAA,mBACAV,EAAAW,KAAAxB,GACAA,EAAAyB,UAAAP,GACA/B,QAAAC,IAAA,OAAA8B,IACA,WACAvC,EAAA+C,qBAAA,EAAAb,EAAAb,EAAA2B,YAAA3B,KAIArB,EAAA+C,qBAAA,EAAAb,EAAAb,EAAA2B,YAAA3B,IA8EA0B,oBA1IA,SA0IAE,EAAAf,EAAAK,EAAAlB,GACAa,EAAAS,YAAAJ,GACAL,EAAAU,WAAAK,EACA,yCACA,oDACAf,EAAAW,KAAAxB,IAGAJ,iBAlJA,SAkJAE,EAAAC,GACA,IAAApB,EAAAC,KACGC,OAAAC,EAAA,EAAAD,EACHE,IAAAJ,EACAK,IAAA,wCACAX,MACAyB,MACAC,MACA8B,OAAA,MAEA5C,QAAA,SAAAC,GACAC,QAAAC,IAAA,QAAAF,IAEAG,KAAA,SAAAH,GACAP,EAAAW,KAAAC,OAAAL,EAAAM,cAMAsC,QApMA,aAwMAC,QAxMA,WAyMAnD,KAAAc,WCpNesC,GADEC,OAFjB,WAA0B,IAAAC,EAAAtD,KAAauD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,OAAOC,GAAA,gBAAmBH,EAAA,iBAAsBE,OAAOE,MAAA,UAAgBP,EAAAQ,GAAA,KAAAL,EAAA,OAAwBM,YAAA,YAAsBN,EAAA,cAAmBE,OAAOK,YAAA,aAA0BC,OAAQC,MAAAZ,EAAA,IAAAa,SAAA,SAAAC,GAAyCd,EAAA5D,IAAA0E,GAAYC,WAAA,SAAmBf,EAAAQ,GAAA,KAAAL,EAAA,OAAwBE,OAAOC,GAAA,UAAY,QAE7XU,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEjF,EACA4D,GATF,EAVA,SAAAsB,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/168.3c2f6f9473f3924e3449.js","sourcesContent":["<template>\r\n\t<div id=\"google-map\">\r\n\t\t<public-header title=\"谷歌地图\"></public-header>\r\n\t\t<div class=\"content\">\r\n\t\t\t<van-search placeholder=\"请输入您的收货地址\" v-model=\"key\"/>\r\n\t\t\t<div id=\"map\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport PublicHeader from '@/components/header'\r\n\timport axios from 'axios'\r\n\timport {getData} from \"@/controller/funcCommon\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tkey: '',\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tPublicHeader,\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tkey() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tlet key= that.key;\r\n\t\t\t\tif(key) {\r\n\t\t\t\t\tgetData({\r\n\t\t\t\t\t\tvue: that,\r\n\t\t\t\t\t\turl: 'system/common/map/suggestion_google',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tkey: key\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tconsole.log('搜索到的地址', res);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\t\tthat.util.$toast(res.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\r\n\t\t\tonLoad() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthat.loadmap();\r\n\t\t\t\tthat.onGetAddressPois(-28.024, 140.887);\r\n\t\t\t},\r\n\r\n\r\n\r\n\t\t\tloadmap(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar uluru = {lat: -28.024, lng: 140.887};\r\n\t\t\t\tvar  map = new google.maps.Map(document.getElementById('map'), {\r\n\t\t\t\t\tcenter: uluru,\r\n\t\t\t\t\tzoom: 8,\r\n\t\t\t\t\t//disableDefaultUI: true  //禁用默认UI\r\n\t\t\t\t});\r\n\t\t\t\t//添加点标记\r\n\t\t\t\tvar marker = new google.maps.Marker({\r\n\t\t\t\t\tposition: uluru,\r\n\t\t\t\t\tlabel: 'A',\r\n\t\t\t\t\tmap: map\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar marker1 = new google.maps.Marker({\r\n\t\t\t\t\tposition: {lat: -27.014, lng: 141.877},\r\n\t\t\t\t\ticon: 'https://1.duoxunwl.com/addons/we7_wmall/template/vue/static/img/marker_red.png',\r\n\t\t\t\t\tlabel: 'B'\r\n\t\t\t\t});\r\n\t\t\t\tmarker1.setMap(map);\r\n\r\n\t\t\t\tvar marker2 = new google.maps.Marker({\r\n\t\t\t\t\tposition: {lat: -27.014, lng: 139.877},\r\n\t\t\t\t\ticon: 'https://1.duoxunwl.com/addons/we7_wmall/template/vue/static/img/marker_red.png',\r\n\t\t\t\t\tlabel: 'C',\r\n\t\t\t\t\tmap: map\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//删除标记\r\n\t\t\t\t//marker1.setMap(null);\r\n\r\n\t\t\t\tvar infoWindow = new google.maps.InfoWindow;\r\n\t\t\t\tif(navigator.geolocation) {\r\n\t\t\t\t\tnavigator.geolocation.getCurrentPosition(function(position) {\r\n\t\t\t\t\t\tvar pos = {\r\n\t\t\t\t\t\t\tlat: position.coords.latitude,\r\n\t\t\t\t\t\t\tlng: position.coords.longitude\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tinfoWindow.setPosition(pos);\r\n\t\t\t\t\t\tinfoWindow.setContent('Location found.');\r\n\t\t\t\t\t\tinfoWindow.open(map);\r\n\t\t\t\t\t\tmap.setCenter(pos);\r\n\t\t\t\t\t\tconsole.log('当前位置' + pos)\r\n\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\tthat.handleLocationError(true, infoWindow, map.getCenter(), map);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Browser doesn't support Geolocation\r\n\t\t\t\t\tthat.handleLocationError(false, infoWindow, map.getCenter(), map);\r\n\t\t\t\t}\r\n\r\n/*\t\t\t\t//监听地图中心点发生变化\r\n\t\t\t\tmap.addListener('center_changed', function(e) {\r\n\t\t\t\t\twindow.setTimeout(function() {\r\n\t\t\t\t\t\tconsole.log('center_changed', map.getCenter() );\r\n\r\n\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//点标记点击事件\r\n\t\t\t\tmarker.addListener('click', function(e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\tmap.setZoom(8);\r\n\t\t\t\t\tmap.setCenter(marker.getPosition());\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//监听地图缩放\r\n\t\t\t\tmap.addListener('zoom_changed', function() {\r\n\t\t\t\t\t//infowindow.setContent('Zoom: ' + map.getZoom());\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar params = {\r\n\t\t\t\t\tkey: 'AIzaSyCG0Ih1wx8QqWm8hAYOSrbm1_0TAZp7O04',\r\n\t\t\t\t\t//input: 'Museum of Contemporary Art Australia',\r\n\t\t\t\t\tinput: 'Mongolian Grill',\r\n\t\t\t\t\tinputtype: 'textquery',\r\n\t\t\t\t\tfields: 'formatted_address,geometry,icon,name,permanently_closed,photos,place_id,plus_code,types',\r\n\t\t\t\t\tlocationbias: 'circle:2000@' + uluru.lat + ',' + uluru.lng\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/!*getData({\r\n\t\t\t\t\tvue: that,\r\n\t\t\t\t\turl: 'system/common/map/place_around_google',\r\n\t\t\t\t\tdata: {\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})*!/\r\n\r\n\t\t\t\t//查找场所请求, 返回1条数据\r\n\t\t\t\tvar url = 'https://maps.googleapis.com/maps/api/place/findplacefromtext/json?' +  this.util.toQueryString(params);\r\n\t\t\t\tconsole.log('keywords', url);\r\n\r\n\t\t\t\t//附近的搜索请求，最多20条数据\r\n\t\t\t\tparams = {\r\n\t\t\t\t\tkey: 'AIzaSyCG0Ih1wx8QqWm8hAYOSrbm1_0TAZp7O04',\r\n\t\t\t\t\tlocation: '-33.8670522,151.1957362',\r\n\t\t\t\t\tradius: 1500,\r\n\t\t\t\t};\r\n\t\t\t\turl = 'https://maps.googleapis.com/maps/api/place/nearbysearch/json?' + this.util.toQueryString(params);\r\n\t\t\t\tconsole.log('nearby', url);\r\n\r\n\t\t\t\t//文本搜索请求，最多20条数据\r\n\t\t\t\tparams = {\r\n\t\t\t\t\tkey: 'AIzaSyCG0Ih1wx8QqWm8hAYOSrbm1_0TAZp7O04',\r\n\t\t\t\t\tquery: 'restaurants in Sydney',\r\n\t\t\t\t};\r\n\t\t\t\turl = 'https://maps.googleapis.com/maps/api/place/textsearch/json?' + this.util.toQueryString(params);\r\n\t\t\t\tconsole.log('textsearch', url);\r\n\t\t\t\t/!*axios.get(url).then((result) => {\r\n\t\t\t\t\tconsole.log(result)\r\n\r\n\t\t\t\t});*!/\r\n\r\n\t\t\t\t//距离API\r\n\t\t\t\tparams = {\r\n\t\t\t\t\torigins: '', //起点\r\n\r\n\t\t\t\t};\r\n\t\t\t\turl = 'http://maps.googleapis.com/maps/api/distancematrix/json?';*/\r\n\r\n\t\t\t},\r\n\r\n\t\t\thandleLocationError(browserHasGeolocation, infoWindow, pos, map) {\r\n\t\t\t\tinfoWindow.setPosition(pos);\r\n\t\t\t\tinfoWindow.setContent(browserHasGeolocation ?\r\n\t\t\t\t\t'Error: The Geolocation service failed.' :\r\n\t\t\t\t\t'Error: Your browser doesn\\'t support geolocation.');\r\n\t\t\t\tinfoWindow.open(map);\r\n\t\t\t},\r\n\r\n\t\t\tonGetAddressPois(lat, lng) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tgetData({\r\n\t\t\t\t\tvue: that,\r\n\t\t\t\t\turl: 'system/common/map/place_around_google',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tlat: lat,\r\n\t\t\t\t\t\tlng: lng,\r\n\t\t\t\t\t\tradius: 1500\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('附近的位置' + res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\tthat.util.$toast(res.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tcreated() {\r\n\r\n\t\t},\r\n\r\n\t\tmounted(){\r\n\t\t\tthis.onLoad();\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t#google-map #map{\r\n\t\twidth: 100%;\r\n\t\theight: 200px;\r\n\t\tborder: 1px solid red;\r\n\t}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/member/gMap.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"google-map\"}},[_c('public-header',{attrs:{\"title\":\"谷歌地图\"}}),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('van-search',{attrs:{\"placeholder\":\"请输入您的收货地址\"},model:{value:(_vm.key),callback:function ($$v) {_vm.key=$$v},expression:\"key\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"map\"}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-24533f70\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/member/gMap.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-24533f70\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./gMap.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./gMap.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./gMap.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-24533f70\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./gMap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/member/gMap.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}