{"version":3,"sources":["webpack:///src/pages/kabao/join.vue","webpack:///./src/pages/kabao/join.vue?2494","webpack:///./src/pages/kabao/join.vue"],"names":["join","data","mobile","yzm","code","text","downcount","sid","store","powers","agreement","member","mobile_secret","coupon","status","edit","bindSuccess","confirmAgreement","islegal","getCode","showPreLoading","components","PublicHeader","header","methods","onLoad","that","this","Object","funcCommon","vue","url","success","res","util","extend","fail","errno","$toast","message","getUrl","path","query","onGetCode","isValidMobile","request","method","check_captcha","then","result","timer","setInterval","clearInterval","onSubmit","discount","onToggleStatus","key","mounted","parseQuery","$route","kabao_join","render","_vm","_h","$createElement","_c","_self","attrs","id","title","_v","staticClass","style","background","backgroundSize","src","logo","alt","_s","length","_l","item","index","class","icon","_e","directives","name","rawName","value","expression","type","disabled","placeholder","domProps","on","input","$event","target","composing","click","checked-color","model","callback","$$v","stopPropagation","close-on-click-overlay","$set","Lang","dollarSign","condition","use_days_limit","jsUrl","show","content","agreementHide","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/133.2b06dea1edf86fdbde30.js","sourcesContent":["<template>\r\n\t<div id=\"kabao-join\">\r\n\t\t<public-header title=\"加入会员\"></public-header>\r\n\t\t<div class=\"content bg-default font-14\">\r\n\t\t\t<div class=\"card-wrap\">\r\n\t\t\t\t<div class=\"card\" :style=\"{background: `url(${store.vip_thumb}) no-repeat top center`, backgroundSize: '100% auto'}\">\r\n\t\t\t\t\t<div class=\"store-logo\" >\r\n\t\t\t\t\t\t<img class=\"img-100\" :src=\"store.logo\" alt=\"\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"store-title ellipsis\">{{store.title}}会员卡</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"padding-15-lr\" v-if=\"store.powers.length > 0\">\r\n\t\t\t\t<ul class=\"powers van-hairline--bottom\">\r\n\t\t\t\t\t<li class=\"power-item\" v-for=\"(item, index) in store.powers\" :key=\"index\">\r\n\t\t\t\t\t\t<i class=\"icon\" :class=\"item.icon\"></i>\r\n\t\t\t\t\t\t<span class=\"title ellipsis\">{{item.title}}</span>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"font-12 padding-15 c-gray\">\r\n\t\t\t\t<div>通过手机号可免费加入会员</div>\r\n\t\t\t\t<div class=\"margin-5-t\" v-if=\"0\">若您已经是线下会员，可通过手机号绑定线下会员卡</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"input-wrap\">\r\n\t\t\t\t<input v-model=\"mobile\" type=\"text\" :disabled=\"!status.edit\" placeholder=\"请输入手机号\">\r\n\t\t\t\t<span class=\"icon icon-edit font-20\" @click=\"onToggleStatus('edit')\" v-show=\"!status.edit\"></span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"input-wrap margin-15-t\" v-if=\"status.edit\">\r\n\t\t\t\t<input v-model=\"yzm\" type=\"text\">\r\n\t\t\t\t<span @click=\"onGetCode\">{{code.text}}</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"tips\">\r\n\t\t\t\t<van-checkbox v-model=\"confirmAgreement\" checked-color=\"#ff2d4b\">\r\n\t\t\t\t\t我已阅读并同意<span class=\"c-danger\" @click.stop=\"onToggleStatus('agreement')\">《用户协议》</span>，包括入会时提供的手机号接受此品牌发送的商业性信息\r\n\t\t\t\t</van-checkbox>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"btn-join \" @click=\"onSubmit\" v-if=\"mobile && yzm && confirmAgreement\">免费加入</div>\r\n\t\t\t<div class=\"btn-join disabled\" v-else>免费加入</div>\r\n\t\t</div>\r\n\t\t<van-popup v-model=\"status.bindSuccess\" :close-on-click-overlay=\"false\" class=\"bind-succcess-popup\">\r\n\t\t\t<div class=\"bind-success\">\r\n\t\t\t\t<img src=\"static/img/pintuan_success_star.png\" alt=\"\" v-if=\"!coupon.discount\">\r\n\t\t\t\t<div class=\"font-16 font-bold margin-15-t\">恭喜您</div>\r\n\t\t\t\t<div class=\"font-14 c-gray margin-10-t w-100 ellipsis padding-10-lr text-center\">成功加入 {{store.title}} 会员</div>\r\n\t\t\t\t<template v-if=\"coupon.discount > 0\">\r\n\t\t\t\t\t<div class=\"coupon\">\r\n\t\t\t\t\t\t<div class=\"left\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<span class=\"font-12\">{{Lang.dollarSign}}</span>\r\n\t\t\t\t\t\t\t\t<span class=\"font-bold font-20\">{{coupon.discount}}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"font-12 margin-5-t\">满{{coupon.condition}}元</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"right\">\r\n\t\t\t\t\t\t\t<div class=\"font-bold\">绑卡赠送代金券</div>\r\n\t\t\t\t\t\t\t<div class=\"font-12 margin-10-t\">有效期{{coupon.use_days_limit}}天</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<span class=\"c-gray font-12 margin-10-t\">代金券已发放到您的账户中</span>\r\n\t\t\t\t</template>\r\n\t\t\t\t<div class=\"btn-detail\" @click=\"util.jsUrl('/plugin/pages/kabao/detail', {sid: store.id}, 'replace')\">确定</div>\r\n\t\t\t</div>\r\n\t\t</van-popup>\r\n\t\t<agreement\r\n\t\t\t:show=\"status.agreement\"\r\n\t\t\ttitle=\"用户协议\"\r\n\t\t\t:content=\"agreement\"\r\n\t\t\t@agreementHide=\"onToggleStatus('agreement')\"\r\n\t\t>\r\n\t\t</agreement>\r\n\t\t<iloading v-if=\"showPreLoading\"></iloading>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport PublicHeader from '@/components/header'\r\n\timport agreement from '@/components/agreement'\r\n\timport {getData, setData} from '@/controller/funcCommon.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmobile: '',\r\n\t\t\t\tyzm: '',\r\n\t\t\t\tcode: {\r\n\t\t\t\t\ttext: '获取验证码',\r\n\t\t\t\t\tdowncount: 60,\r\n\t\t\t\t},\r\n\r\n\t\t\t\tsid: 0,\r\n\t\t\t\tstore: {\r\n\t\t\t\t\tpowers: []\r\n\t\t\t\t},\r\n\t\t\t\tagreement: '',\r\n\t\t\t\tmember: {\r\n\t\t\t\t\tmobile_secret: ''\r\n\t\t\t\t},\r\n\t\t\t\tcoupon: {},\r\n\t\t\t\tstatus: {\r\n\t\t\t\t\tedit: false,\r\n\t\t\t\t\tagreement: false,\r\n\t\t\t\t\tbindSuccess: false,\r\n\t\t\t\t},\r\n\t\t\t\tconfirmAgreement: false,\r\n\t\t\t\tislegal: false,\r\n\t\t\t\tgetCode: false,\r\n\t\t\t\tshowPreLoading: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tPublicHeader,\r\n\t\t\tagreement\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonLoad() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tgetData({\r\n\t\t\t\t\tvue: that,\r\n\t\t\t\t\turl: 'kabao/index/join',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsid: that.sid\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthat.store = that.util.extend(that.store, res.store);\r\n\t\t\t\t\t\tthat.member = that.util.extend(that.member, res.member);\r\n\t\t\t\t\t\tthat.mobile = that.member.mobile_secret;\r\n\t\t\t\t\t\tthat.agreement = res.agreement;\r\n\t\t\t\t\t\tthat.getCode = true;\r\n\t\t\t\t\t\tthat.islegal = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\tif(res.errno == -2) {\r\n\t\t\t\t\t\t\tthat.util.$toast(res.message, that.util.getUrl({path: '/plugin/pages/kabao/detail', query: {sid: that.sid}}), 1500, 'replace')\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.util.$toast(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tonGetCode() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tif(!that.getCode || that.code.downcount != 60) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif(!that.mobile) {\r\n\t\t\t\t\tthat.util.$toast('手机号不能为空');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif(!that.util.isValidMobile(that.mobile)) {\r\n\t\t\t\t\tthat.util.$toast('手机号格式错误');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tthat.util.request({\r\n\t\t\t\t\turl: 'system/common/code',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tmobile: that.mobile,\r\n\t\t\t\t\t\tcheck_captcha: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tvar result = res.data.message;\r\n\t\t\t\t\tif(result.errno) {\r\n\t\t\t\t\t\tthat.util.$toast(result.message);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.code.text = that.code.downcount + \"秒后重新获取\";\r\n\t\t\t\t\t\tvar timer = setInterval(() => {\r\n\t\t\t\t\t\t\tthat.code.downcount--;\r\n\t\t\t\t\t\t\tif(that.code.downcount <= 0){\r\n\t\t\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t\t\t\tthat.code.text = \"获取验证码\";\r\n\t\t\t\t\t\t\t\tthat.code.downcount = 60;\r\n\t\t\t\t\t\t\t\tthat.getCode = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.code.text = that.code.downcount + \"秒后重新获取\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\tthat.util.$toast('验证码发送成功, 请注意查收');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\r\n\t\t\tonSubmit() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tif(!that.islegal) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif(!that.mobile){\r\n\t\t\t\t\tthat.util.$toast('手机号不能为空');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif(!that.util.isValidMobile(that.mobile)) {\r\n\t\t\t\t\tthat.util.$toast('手机号格式错误');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif(!that.yzm) {\r\n\t\t\t\t\tthat.util.$toast('请输入短信验证码');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif(!that.confirmAgreement) {\r\n\t\t\t\t\tthat.util.$toast('请阅读并同意用户协议');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthat.islegal = false;\r\n\t\t\t\tsetData({\r\n\t\t\t\t\tvue: that,\r\n\t\t\t\t\turl: 'kabao/index/bind',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsid: that.sid,\r\n\t\t\t\t\t\tmobile: that.mobile,\r\n\t\t\t\t\t\tcode: that.yzm,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif(res.coupon && res.coupon.discount > 0) {\r\n\t\t\t\t\t\t\tthat.coupon = that.util.extend(that.coupon, res.coupon);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.onToggleStatus('bindSuccess');\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\tif(res.errno == -2) {\r\n\t\t\t\t\t\t\tthat.util.$toast(res.message, that.util.getUrl({path: '/plugin/pages/kabao/detail', query: {sid: that.sid}}), 1500, 'replace')\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.util.$toast(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tonToggleStatus(key) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthat.status[key] = !that.status[key];\r\n\t\t\t\tif(key == 'edit') {\r\n\t\t\t\t\tthat.mobile = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmounted() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar query = that.util.parseQuery(that.$route.query);\r\n\t\t\tthat.sid = query.sid > 0 ? query.sid : that.sid;\r\n\t\t\tthat.onLoad();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t#kabao-join .card-wrap{\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 60px;\r\n\t\tbackground-color: #ff2d4b;\r\n\t\tmargin-bottom: 55px;\r\n\t}\r\n\t#kabao-join .card-wrap .card{\r\n\t\tposition: absolute;\r\n\t\tleft: 15px;\r\n\t\tright: 15px;\r\n\t\tbottom: 0;\r\n\t\ttransform: translateY(50%);\r\n\t\tpadding: 15px 20px;\r\n\t\tborder-radius: 10px;\r\n\t\tcolor: #fff;\r\n\t}\r\n\t#kabao-join .card-wrap .card .store-logo{\r\n\t\tfloat: left;\r\n\t\twidth: 50px;\r\n\t\theight: 50px;\r\n\t\tborder-radius: 5px;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t#kabao-join .card-wrap .card .store-title{\r\n\t\tmargin-left: 65px;\r\n\t\theight: 50px;\r\n\t\tline-height: 50px;\r\n\t\tfont-size: 15px;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t#kabao-join .powers{\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: row wrap;\r\n\t\talign-items: center;\r\n\t}\r\n\t#kabao-join .powers .power-item{\r\n\t\twidth: 25%;\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: column nowrap;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding-bottom: 15px;\r\n\t}\r\n\t#kabao-join .powers .power-item .icon{\r\n\t\twidth: 44px;\r\n\t\theight: 44px;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-bottom: 10px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tborder: 1px solid rgba(255, 45, 75, 0.3);\r\n\t\tfont-size: 22px;\r\n\t\tcolor: #ff2d4b;\r\n\t}\r\n\t#kabao-join .powers .power-item .title{\r\n\t\tmax-width: 95%;\r\n\t}\r\n\t#kabao-join .input-wrap{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 0 7.5%;\r\n\t\tmargin: 0 20px;\r\n\t\tborder-radius: 100px;\r\n\t\tborder: 1px solid rgba(255, 45, 75, 0.34);\r\n\t}\r\n\t#kabao-join .input-wrap input{\r\n\t\twidth: 55%;\r\n\t\theight: 44px;\r\n\t\tfont-size: 16px;\r\n\t}\r\n\t#kabao-join .input-wrap input:disabled{\r\n\t\tbackground-color: #fff;\r\n\t\tcolor: #999;\r\n\t}\r\n\t#kabao-join .input-wrap span{\r\n\t\twidth: 40%;\r\n\t\ttext-align: right;\r\n\t\tcolor: #999;\r\n\t}\r\n\t#kabao-join .tips{\r\n\t\tpadding: 15px 20px;\r\n\t}\r\n\t#kabao-join .tips .van-checkbox{\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t#kabao-join .tips .van-checkbox__label{\r\n\t\twidth: 92%;\r\n\t\tfont-size: 12px;\r\n\t\tline-height: 1.4;\r\n\t}\r\n\t#kabao-join .btn-join{\r\n\t\tmargin: 20px 20px;\r\n\t\theight: 44px;\r\n\t\tline-height: 44px;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 50px;\r\n\t\tbackground-color: #ff2d4b;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 16px;\r\n\t}\r\n\t#kabao-join .btn-join.disabled{\r\n\t\tbackground-color: #ccc;\r\n\t}\r\n\t#kabao-join .bind-succcess-popup{\r\n\t\twidth: 70%;\r\n\t\tborder-radius: 10px;\r\n\t}\r\n\t#kabao-join .bind-succcess-popup .bind-success{\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: column nowrap;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 15px 0;\r\n\t}\r\n\t#kabao-join .bind-succcess-popup .bind-success .coupon{\r\n\t\twidth: 90%;\r\n\t\theight: 70px;\r\n\t\tmargin-top: 10px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tbackground: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAU8AAACCCAMAAADxEroeAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAzUExURUxpcaOZb7mpc6uecJaRbdG7eZ+WcNnBeL6ueaqqqv/1zde9buzZnfvuwODIgejTk/TksZNdMVMAAAAKdFJOUwBkpGsc9kT+zgMBpWR+AAABk0lEQVR42u3VYW6rMBCF0UkC2NjYZv+rfdJTVYXfVKKk51vC0YxuxDKnekVTHJrq7UvzErHU0coF9VccevVy99pWl5i3ckkjx6E8yv0bc6RWLmlPa7y1pr3cv5ailovq+XCevXxC9TrPlp7x3bM2nidrNa9fz55rKzzP1nrKj2l65NRb4fkD7SPVmsZeCk/x5MmTp3jy5CmePHnqN3tuG0+ePHny/PPx5MmTpz3iyZMnT3vEk6d42iOePHny5GmPxJMnT3vEkydPnuLJk6fsEU+ePHnaI548xZOnPeLJkydP8eTJU/aIJ0+ePO0RT57iaY948uTJk6c9Ek+ePO0RT548edojnjx5yh7x5MmTpz3iKZ48edojnjx58hRPnjxlj3jyFE+ePHmKJ0+e4smTp36F5z5SrWnsPH+i1lN+TNMjp954nq7VvMb/1lwbz9Ocz/jumRrPc/Ucb+X+IZ5XHcae1nhrTZ8wSi3FPMoljRyH8ij3b5tjqVu75N1fcejV73+doy4Ry5zqFU1xaKq3L81L/AMe86K90WRbJAAAAABJRU5ErkJggg==) 0 0 no-repeat;\r\n\t\tbackground-size: 100% 100%;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #BF844F;\r\n\t}\r\n\t#kabao-join .bind-succcess-popup .bind-success .coupon .left{\r\n\t\twidth: 39%;\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: column nowrap;\r\n\t\talign-items: center;\r\n\r\n\t}\r\n\t#kabao-join .bind-succcess-popup .bind-success .coupon .right{\r\n\t\twidth: 61%;\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: column nowrap;\r\n\t\talign-items: center;\r\n\t}\r\n\t#kabao-join .bind-succcess-popup .bind-success .btn-detail{\r\n\t\twidth: 90%;\r\n\t\tpadding: 15px 0;\r\n\t\tmargin-top: 20px;\r\n\t\tborder-radius: 100px;\r\n\t\ttext-align: center;\r\n\t\tbackground-color: #BF844F;\r\n\t\tcolor: #fff;\r\n\t}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/kabao/join.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"kabao-join\"}},[_c('public-header',{attrs:{\"title\":\"加入会员\"}}),_vm._v(\" \"),_c('div',{staticClass:\"content bg-default font-14\"},[_c('div',{staticClass:\"card-wrap\"},[_c('div',{staticClass:\"card\",style:({background: (\"url(\" + (_vm.store.vip_thumb) + \") no-repeat top center\"), backgroundSize: '100% auto'})},[_c('div',{staticClass:\"store-logo\"},[_c('img',{staticClass:\"img-100\",attrs:{\"src\":_vm.store.logo,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"store-title ellipsis\"},[_vm._v(_vm._s(_vm.store.title)+\"会员卡\")])])]),_vm._v(\" \"),(_vm.store.powers.length > 0)?_c('div',{staticClass:\"padding-15-lr\"},[_c('ul',{staticClass:\"powers van-hairline--bottom\"},_vm._l((_vm.store.powers),function(item,index){return _c('li',{key:index,staticClass:\"power-item\"},[_c('i',{staticClass:\"icon\",class:item.icon}),_vm._v(\" \"),_c('span',{staticClass:\"title ellipsis\"},[_vm._v(_vm._s(item.title))])])}),0)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"font-12 padding-15 c-gray\"},[_c('div',[_vm._v(\"通过手机号可免费加入会员\")]),_vm._v(\" \"),(0)?_c('div',{staticClass:\"margin-5-t\"},[_vm._v(\"若您已经是线下会员，可通过手机号绑定线下会员卡\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"input-wrap\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mobile),expression:\"mobile\"}],attrs:{\"type\":\"text\",\"disabled\":!_vm.status.edit,\"placeholder\":\"请输入手机号\"},domProps:{\"value\":(_vm.mobile)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.mobile=$event.target.value}}}),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.status.edit),expression:\"!status.edit\"}],staticClass:\"icon icon-edit font-20\",on:{\"click\":function($event){return _vm.onToggleStatus('edit')}}})]),_vm._v(\" \"),(_vm.status.edit)?_c('div',{staticClass:\"input-wrap margin-15-t\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.yzm),expression:\"yzm\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.yzm)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.yzm=$event.target.value}}}),_vm._v(\" \"),_c('span',{on:{\"click\":_vm.onGetCode}},[_vm._v(_vm._s(_vm.code.text))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tips\"},[_c('van-checkbox',{attrs:{\"checked-color\":\"#ff2d4b\"},model:{value:(_vm.confirmAgreement),callback:function ($$v) {_vm.confirmAgreement=$$v},expression:\"confirmAgreement\"}},[_vm._v(\"\\n\\t\\t\\t\\t我已阅读并同意\"),_c('span',{staticClass:\"c-danger\",on:{\"click\":function($event){$event.stopPropagation();return _vm.onToggleStatus('agreement')}}},[_vm._v(\"《用户协议》\")]),_vm._v(\"，包括入会时提供的手机号接受此品牌发送的商业性信息\\n\\t\\t\\t\")])],1),_vm._v(\" \"),(_vm.mobile && _vm.yzm && _vm.confirmAgreement)?_c('div',{staticClass:\"btn-join \",on:{\"click\":_vm.onSubmit}},[_vm._v(\"免费加入\")]):_c('div',{staticClass:\"btn-join disabled\"},[_vm._v(\"免费加入\")])]),_vm._v(\" \"),_c('van-popup',{staticClass:\"bind-succcess-popup\",attrs:{\"close-on-click-overlay\":false},model:{value:(_vm.status.bindSuccess),callback:function ($$v) {_vm.$set(_vm.status, \"bindSuccess\", $$v)},expression:\"status.bindSuccess\"}},[_c('div',{staticClass:\"bind-success\"},[(!_vm.coupon.discount)?_c('img',{attrs:{\"src\":\"static/img/pintuan_success_star.png\",\"alt\":\"\"}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"font-16 font-bold margin-15-t\"},[_vm._v(\"恭喜您\")]),_vm._v(\" \"),_c('div',{staticClass:\"font-14 c-gray margin-10-t w-100 ellipsis padding-10-lr text-center\"},[_vm._v(\"成功加入 \"+_vm._s(_vm.store.title)+\" 会员\")]),_vm._v(\" \"),(_vm.coupon.discount > 0)?[_c('div',{staticClass:\"coupon\"},[_c('div',{staticClass:\"left\"},[_c('div',[_c('span',{staticClass:\"font-12\"},[_vm._v(_vm._s(_vm.Lang.dollarSign))]),_vm._v(\" \"),_c('span',{staticClass:\"font-bold font-20\"},[_vm._v(_vm._s(_vm.coupon.discount))])]),_vm._v(\" \"),_c('div',{staticClass:\"font-12 margin-5-t\"},[_vm._v(\"满\"+_vm._s(_vm.coupon.condition)+\"元\")])]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"font-bold\"},[_vm._v(\"绑卡赠送代金券\")]),_vm._v(\" \"),_c('div',{staticClass:\"font-12 margin-10-t\"},[_vm._v(\"有效期\"+_vm._s(_vm.coupon.use_days_limit)+\"天\")])])]),_vm._v(\" \"),_c('span',{staticClass:\"c-gray font-12 margin-10-t\"},[_vm._v(\"代金券已发放到您的账户中\")])]:_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"btn-detail\",on:{\"click\":function($event){return _vm.util.jsUrl('/plugin/pages/kabao/detail', {sid: _vm.store.id}, 'replace')}}},[_vm._v(\"确定\")])],2)]),_vm._v(\" \"),_c('agreement',{attrs:{\"show\":_vm.status.agreement,\"title\":\"用户协议\",\"content\":_vm.agreement},on:{\"agreementHide\":function($event){return _vm.onToggleStatus('agreement')}}}),_vm._v(\" \"),(_vm.showPreLoading)?_c('iloading'):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-40843e08\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/kabao/join.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-40843e08\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./join.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./join.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./join.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-40843e08\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./join.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/kabao/join.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}