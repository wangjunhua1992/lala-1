webpackJsonp([215],{UvdB:function(t,i){},mkP2:function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=o("Dd8w"),a=o.n(e),n=o("Cz8s"),s=o("mzkE"),c=o("deIj"),l=o("NYxO"),r={components:{PublicHeader:n.a,PublicFooter:s.a},data:function(){return{showPreLoading:!0,catePopup:!1,categorys:{},categorySelected:{},black_member:{status:!1},failedTips:{type:"message",tips:"",btnText:"关闭",link:"/gohome/pages/tongcheng/index"},getLocationFail:!1,menufooter:{}}},methods:a()({},Object(l.b)(["setLocation","getLocation"]),{onLoad:function(t){var i=this;t&&(i.id=t),Object(c.a)({vue:i,url:"tongcheng/publish/index",data:{lat:this.locationInfo.location_x,lng:this.locationInfo.location_y,menufooter:1},success:function(t){i.categorys=t.categorys,i.menufooter=window.menufooter},fail:function(t){if(-1e3==t.errno){var o=t.message.black_member;return i.black_member=o,void(i.failedTips.tips=o.tip)}i.util.$toast(t.message,"",1e3)}})},onPublish:function(t){if(t.child)this.categorySelected=t,this.catePopup=!this.catePopup;else{var i=t.parentid,o=t.id;0==i&&(i=t.id,o=0),this.$router.push(this.util.getUrl({path:"/gohome/pages/tongcheng/publish/post",query:{parentid:i,childid:o}}))}},onInit:function(){var t=this;this.getLocation(),this.locationInfo.location_x?(t.getLocationFail=!1,t.locationInfo.last_location_x=this.locationInfo.location_x,t.onLoad()):this.util.getLocation({successLocation:function(i){t.setLocation({location_x:i.location_x,location_y:i.location_y}),t.onLoad()},successAddress:function(i){t.setLocation({location_x:i.location_x,location_y:i.location_y,address:i.address})},fail:function(i){t.setLocation({last_location_x:0,location_x:0,address:"获取定位失败"}),t.getLocationFail=!0,t.onLoad()}})}}),computed:a()({},Object(l.c)(["locationInfo"])),mounted:function(){this.onInit()}},u={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{attrs:{id:"publish-index"}},[o("public-header",{attrs:{title:"发布信息"}}),t._v(" "),o("public-footer",{attrs:{menufooter:t.menufooter,preLoading:t.showPreLoading,showFailedTips:t.black_member.status,failedTips:t.failedTips}}),t._v(" "),o("div",{staticClass:"content"},[o("div",{staticClass:"tip"},[t._v("免责声明：本平台只负责信息的发布与展示，信息本身与平台无关，平台本身不负任何责任。")]),t._v(" "),o("div",{staticClass:"store-settle flex-lr hide"},[t._m(0),t._v(" "),o("van-icon",{staticClass:"c-gray font-14",attrs:{name:"arrow"}})],1),t._v(" "),o("div",{staticClass:"bg-default margin-10-t"},[o("div",{staticClass:"padding-15-tb text-center font-13  van-hairline--bottom"},[t._v("请选择您要发布的消息类型")]),t._v(" "),o("van-row",{staticClass:"padding-15-t"},t._l(t.categorys,function(i,e){return o("van-col",{key:"p"+e,attrs:{span:"6"}},[o("div",{staticClass:"cate-item",on:{click:function(o){return t.onPublish(i)}}},[o("div",{staticClass:"thumb-wrap"},[o("img",{attrs:{src:i.thumb,alt:""}})]),t._v(" "),o("div",{staticClass:"title ellipsis"},[t._v(t._s(i.title))])])])}),1)],1)]),t._v(" "),o("van-popup",{staticClass:"bg-gray",attrs:{position:"bottom"},model:{value:t.catePopup,callback:function(i){t.catePopup=i},expression:"catePopup"}},[o("div",{staticClass:"title-parent padding-15-tb text-center font-14 bg-danger"},[t._v("选择"+t._s(t.categorySelected.title)+"子分类")]),t._v(" "),o("ul",{staticClass:"child-list"},t._l(t.categorySelected.child,function(i,e){return o("li",{key:"c"+e,staticClass:"van-hairline--bottom",on:{click:function(o){return t.onPublish(i)}}},[t._v(t._s(i.title))])}),0),t._v(" "),o("div",{staticClass:"title-parent padding-15-tb text-center font-14 margin-10-t bg-default",on:{click:function(i){t.catePopup=!t.catePopup}}},[t._v("取消")])])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"flex"},[i("i",{staticClass:"icon icon-store"}),this._v(" "),i("ul",{staticClass:"margin-10-l"},[i("li",{staticClass:"font-15 margin-5-b"},[this._v("我是商家，点击入驻")]),this._v(" "),i("li",{staticClass:"c-gray font-13"},[this._v("超低成本，帮您快速宣传店铺")])])])}]};var d=o("VU/8")(r,u,!1,function(t){o("UvdB")},null,null);i.default=d.exports}});
//# sourceMappingURL=215.e5efa572e902c702a370.js.map