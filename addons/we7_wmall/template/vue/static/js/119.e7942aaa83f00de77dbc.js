webpackJsonp([119],{EDeD:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Gu7T"),i=e.n(s),n={data:function(){return{chats:{page:1,psize:50,loading:!1,finished:!1,data:[]},showPreLoading:!0}},methods:{onLoad:function(){var t=this;if(t.chats.finished)return!1;t.util.request({url:"kefu/member/index",data:{page:t.chats.page,psize:t.chats.psize}}).then(function(a){t.showPreLoading=!1;var e=a.data.message;if(e.errno)t.util.$toast(e.message);else{var s=(e=e.message).chats.chats;s&&s.length>0?(t.chats.data=[].concat(i()(t.chats.data),i()(s)),s.length<t.chats.psize&&(t.chats.finished=!0)):t.chats.finished=!0,t.chats.page++,t.chats.loading=!1}})},onCloseChat:function(t){var a=this;a.$dialog.confirm({title:"确定从会话列表移除该会话吗"}).then(function(){a.util.request({url:"kefu/member/delete",data:{chatid:a.chats.data[t].id}}).then(function(e){var s=e.data.message;s.errno?a.util.$toast(s.message):a.$delete(a.chats.data,t)})}).catch(function(){})}},mounted:function(){},components:{PublicHeader:e("Cz8s").a}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"kefu-index"}},[e("public-header",{attrs:{title:"消息中心"}}),t._v(" "),e("div",{staticClass:"content font-14"},[e("van-list",{staticClass:"chat-list",attrs:{finished:t.chats.finished,offset:100,"immediate-check":!0},on:{load:t.onLoad},model:{value:t.chats.loading,callback:function(a){t.$set(t.chats,"loading",a)},expression:"chats.loading"}},[t._l(t.chats.data,function(a,s){return[e("van-swipe-cell",{attrs:{"right-width":70}},[e("router-link",{staticClass:"chat-item",attrs:{to:t.util.getUrl({path:"/plugin/pages/kefu/chat",query:{relation:a.relation,kefuopenid:a.kefuopenid,kefuunionid:a.kefuunionid}}),tag:"div"}},[e("div",{staticClass:"item-inner",class:{"van-hairline--top":s>0}},[e("div",{staticClass:"avatar"},[e("img",{staticClass:"img-100",attrs:{src:a.kefuavatar,alt:""}})]),t._v(" "),e("div",{staticClass:"info"},[e("div",{staticClass:"flex-lr"},[e("div",{staticClass:"nickname ellipsis "},[t._v(t._s(a.kefunickname))]),t._v(" "),e("div",{staticClass:"lasttime ellipsis c-gray"},[t._v(t._s(a.lasttime_cn))])]),t._v(" "),e("div",{staticClass:"last-content w-100 ellipsis c-gray font-13"},[t._v(t._s(a.content))])]),t._v(" "),a.notread>0?e("div",{staticClass:"not-read"},[t._v(t._s(a.notread))]):t._e()])]),t._v(" "),e("span",{staticClass:"del-chat",attrs:{slot:"right"},on:{click:function(a){return a.stopPropagation(),t.onCloseChat(s)}},slot:"right"},[t._v("删除")])],1)]})],2)],1),t._v(" "),t.showPreLoading?e("iloading"):t._e()],1)},staticRenderFns:[]};var l=e("VU/8")(n,c,!1,function(t){e("Myqw")},null,null);a.default=l.exports},Myqw:function(t,a){}});
//# sourceMappingURL=119.e7942aaa83f00de77dbc.js.map