webpackJsonp([99],{"+kDF":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("Gu7T"),i=o.n(s),a=o("woOf"),r=o.n(a),l=o("Cz8s"),n=o("+TmT"),c={components:{PublicHeader:l.a,Uploader:n.a},data:function(){return{id:Number,delivery_service:0,goods_quality:0,note:"",goods:[],thumbs:[],newGoods:[],order:{},showPreLoading:!0}},methods:{onLoad:function(){var t=this;this.$route.query.id?this.id=this.$route.query.id:this.$toast("订单不存在或已删除！"),this.util.request({url:"wmall/order/comment/index",data:{id:this.id}}).then(function(e){t.showPreLoading=!1;var o=e.data.message;o.errno?t.$toast(o.message):(console.log(o),t.order=r()(t.order,o.message.order),o.message.goods&&(t.goods=[].concat(i()(t.goods),i()(o.message.goods))),t.goods.forEach(function(e,o){var s={id:e.id,goods_id:e.goods_id,activity:e.activity};t.newGoods.push(s)}))}),this.util.isGlala()&&(this.util.requestPermission({perm:"camera"}),this.util.requestPermission({perm:"photos"}))},favorOppose:function(t,e){t=t;"favor"==(e=e)?(this.goods[t].activity=1,this.newGoods[t].activity=1):(this.goods[t].activity=2,this.newGoods[t].activity=2)},onGetImgsUrl:function(t){this.thumbs=t},onSubmit:function(){var t=this;if(1==this.order.order_type&&!this.delivery_service)return this.$toast("请您评价配送服务"),!1;if(!this.goods_quality)return this.$toast("请您评价商品质量"),!1;var e={id:this.id,note:this.note,goods_quality:this.goods_quality,deliverScore:this.delivery_service,thumbs:this.thumbs,goods:this.newGoods};this.util.request({url:"wmall/order/comment/post",method:"post",data:e}).then(function(e){var o=e.data.message;if(o.errno)return t.util.$toast(o.message),!1;t.util.$toast(o.message,t.util.getUrl({path:"/pages/order/detail",query:{id:t.id}}))})}},mounted:function(){this.onLoad()}},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"order-comment"}},[o("public-header",{attrs:{title:"باھا بىرىش"}}),t._v(" "),o("div",{staticClass:"content"},[1==t.order.order_type?[o("div",{staticClass:"content-block-title"},[t._v("يەتكۈزگۈچىگە باھا بىرىش")]),t._v(" "),o("van-cell-group",[o("van-cell",[o("div",{staticClass:"flex",attrs:{slot:"title"},slot:"title"},[o("span",{staticClass:"van-cell-text"},[t._v("يەتكۈزۈش مۇلازىمىتى")]),t._v(" "),o("van-rate",{staticClass:"flex",attrs:{size:20,count:5,color:"#ff2d4b","void-color":"#FF6C81"},model:{value:t.delivery_service,callback:function(e){t.delivery_service=e},expression:"delivery_service"}})],1)])],1)]:t._e(),t._v(" "),o("div",{staticClass:"content-block-title"},[t._v("تاۋارغا باھا بىرىش")]),t._v(" "),o("van-cell-group",[o("van-cell",[o("div",{staticClass:"flex",attrs:{slot:"title"},slot:"title"},[o("span",{staticClass:"van-cell-text"},[t._v("تاۋار سۈپىتى")]),t._v(" "),o("van-rate",{staticClass:"flex",attrs:{size:20,count:5,color:"#ff2d4b","void-color":"#FF6C81"},model:{value:t.goods_quality,callback:function(e){t.goods_quality=e},expression:"goods_quality"}})],1)]),t._v(" "),t._l(t.goods,function(e,s){return o("van-cell",{key:s,attrs:{title:e.goods_title}},[o("div",{staticClass:"favor-oppose",attrs:{slot:"right-icon"},slot:"right-icon"},[o("label",{on:{click:function(e){return t.favorOppose(s,"favor")}}},[o("input",{staticClass:"radio",attrs:{type:"radio",value:"1"},domProps:{checked:1==e.activity}}),t._v(" "),o("span",{staticClass:"favor"})]),t._v(" "),o("label",{on:{click:function(e){return t.favorOppose(s,"oppose")}}},[o("input",{staticClass:"radio",attrs:{type:"radio",value:"2"},domProps:{checked:2==e.activity}}),t._v(" "),o("span",{staticClass:"oppose"})])])])})],2),t._v(" "),o("div",{staticClass:"content-block-title"},[t._v("باھا سۆزىڭىزنى يىزىڭ")]),t._v(" "),o("van-cell-group",[o("van-field",{attrs:{type:"textarea",placeholder:"تاۋار ياكى يەتكۈزۈش سۈپىتىگە بولغان باھايىڭىزنى يىزىڭ"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1),t._v(" "),o("div",{staticClass:"content-block-title"},[t._v("رەسىم چىقىرىش")]),t._v(" "),o("uploader",{attrs:{max:6},on:{onGetUrl:t.onGetImgsUrl}}),t._v(" "),o("div",{staticClass:"save-btn"},[o("van-button",{attrs:{size:"large"},on:{click:function(e){return t.onSubmit()}}},[t._v("باھانى يوللاش")])],1)],2),t._v(" "),t.showPreLoading?o("iloading"):t._e()],1)},staticRenderFns:[]};var v=o("VU/8")(c,d,!1,function(t){o("D1op")},null,null);e.default=v.exports},D1op:function(t,e){}});
//# sourceMappingURL=99.f1942ec5e683d26193aa.js.map